# Отчет о лабораторной работе №5

Разработка и развертывание Web-приложений

## Цель работы

Добавить Web-приложения нашему приложению. Магазин зоотоваров получит первый интерфейс.

## Выполнение работы

В ходе лабораторной работы было реализовано веб-приложение для магазина зоотоваров, в котором используются Java-сервлеты и Spring.

1. Java-сервлеты:
   - Создан сервлет `OrderServlet`, который формирует страницу с информацией о заказах. На странице добавлена кнопка для перехода к форме создания нового заказа.
   - Создан сервлет `CreateOrderServlet`, который отображает форму для создания нового заказа. После отправки формы происходит сохранение данных и редирект на страницу со списком заказов.
   - Реализован REST-сервлет `ProductRestServlet`, который по HTTP-запросу возвращает информацию о продуктах в формате JSON, включая название, категорию и количество на складе.

2. Spring:
   - Для работы с бизнес-логикой и взаимодействием с базой данных использован Spring Framework и Spring Data JPA.
   - Конфигурация Spring ApplicationContext была осуществлена с помощью `ContextLoaderListener`.
   - Сервлеты получают доступ к Spring Bean'ам через `WebApplicationContextUtils`.

3. Сборка и деплой:
   - В проект был добавлен плагин `war` для сборки WAR-файла.
   - Конфигурация Gradle настроена на создание файла `lab6.war`.
   - WAR-файл был развернут на сервере Apache Tomcat.
   - В `tomcat-users.xml` был добавлен пользователь с правами администратора для доступа к менеджеру Tomcat.

4. **Тестирование**:
   - Веб-страницы и REST-сервис были протестированы с помощью браузера и Postman.
   - REST API корректно возвращает информацию о продуктах в формате JSON.

## Контрольные вопросы

1. **Что такое Servlet и зачем он нужен?**  
   Сервлет — это Java-класс, который обрабатывает HTTP-запросы и формирует HTTP-ответы на сервере. Он используется для создания динамического веб-контента, таких как веб-страницы и REST API.

2. **Что делает web.xml и зачем он нужен в веб-приложении?**  
   `web.xml` — это файл конфигурации для веб-приложений в Java EE. Он используется для описания сервлетов, их маппинга URL, фильтров, слушателей и других параметров приложения. В современных приложениях `web.xml` часто заменяется аннотациями, но он все еще поддерживается.

3. **Что такое WAR-файл и чем он отличается от JAR?**  
   WAR (Web Archive) — это архив для веб-приложений Java, который включает в себя сервлеты, JSP, файлы конфигурации, статические ресурсы и классы. JAR (Java Archive) — это архив, содержащий только классы и ресурсы для Java-программ. WAR используется для развертывания в веб-серверах, JAR — для приложений или библиотек.

4. **Что такое ServletContext и как его использовать?**  
   `ServletContext` представляет контекст веб-приложения. Он используется для доступа к общим параметрам конфигурации, хранения атрибутов для всех сервлетов и получения путей к ресурсам внутри приложения.

5. **Чем отличается HttpServletRequest от HttpServletResponse?**  
   `HttpServletRequest` содержит информацию о входящем HTTP-запросе (параметры, заголовки, тело, сессия и т. д.), а `HttpServletResponse` позволяет сформировать HTTP-ответ (заголовки, статус, тело ответа).

6. **Какой интерфейс нужно реализовать, чтобы создать Listener, реагирующий на запуск приложения?**  
   Нужно реализовать интерфейс `javax.servlet.ServletContextListener`. Он содержит методы `contextInitialized` (вызывается при запуске приложения) и `contextDestroyed` (вызывается при остановке приложения).

7. **Как получить доступ к Spring ApplicationContext внутри обычного сервлета?**  
   Можно получить доступ к Spring ApplicationContext через `WebApplicationContextUtils`:
   ```java
   ServletContext servletContext = getServletContext();
   ApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servletContext);
    ```

8. **Что делает ContextLoaderListener в Spring-приложении?**
   ContextLoaderListener инициализирует корневой Spring ApplicationContext при запуске веб-приложения и связывает Spring с жизненным циклом сервера.

9. **Зачем нужно использовать @WebServlet и чем он лучше/хуже конфигурации в web.xml?**
   @WebServlet — это аннотация для описания сервлета и его URL-мэппинга непосредственно в коде, без использования web.xml. Она упрощает код и делает его более компактным. Однако такая конфигурация сложнее для централизованного управления и динамической настройки.

10. **Как можно использовать один Spring Bean в нескольких сервлетах?**
   Один Spring Bean можно использовать в нескольких сервлетах через DI (Dependency Injection). Bean объявляется в Spring ApplicationContext, а затем инжектируется в нужные сервлеты с помощью аннотации @Autowired.

## Выводы
   В ходе лабораторной работы был реализован веб-сервис для магазина зоотоваров, использующий Java-сервлеты и Spring. Приложение успешно развернуто на сервере Apache Tomcat и протестировано с помощью Postman. В ходе работы была изучена настройка сервлетов, интеграция с Spring, работа с веб-сервисами и развертывание WAR-файлов. Опыта работы с REST-сервисами и настройкой серверов было получено достаточно для дальнейшего использования этих технологий в более сложных проектах.